<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">

    <changeSet id="Init eledger db" author="A.N.">
        <sqlFile path="../../sql/eledger/000_init_db.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create Revision Table" author="B.A.">
        <sqlFile path="../../sql/eledger/001_create_revision_table.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="GL account configuration schemas" author="B.A." dbms="postgresql">
        <sqlFile path="../../sql/eledger/002_config_gl_account_schema.sql" relativeToChangelogFile="true"/>
        <sqlFile path="../../sql/eledger/003_config_gl_account_audit_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Data types configuration schemas" author="B.A.">
        <sqlFile path="../../sql/eledger/004_config_data_type_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Transaction types configuration schemas" author="B.A.">
        <sqlFile path="../../sql/eledger/005_config_transaction_type_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="GL account level data insertion" author="V.G.">
        <sqlFile path="../../sql/eledger/006_config_gl_account_part_type_data.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Data type data insertion" author="V.G.">
        <sqlFile path="../../sql/eledger/007_config_data_type_data.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create taxpayer schema" author="B.A.">
        <sqlFile path="../../sql/eledger/008_taxpayer_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create transaction schema" author="B.A.">
        <sqlFile path="../../sql/eledger/009_transaction_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create property schema" author="B.A.">
        <sqlFile path="../../sql/eledger/010_config_property_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create transaction type to GL account join table" author="V.G.">
        <sqlFile path="../../sql/eledger/011_config_transaction_type_gl_account_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create accounting actions schema" author="V.G.">
        <sqlFile path="../../sql/eledger/012_config_accounting_action_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create transaction type couples" author="V.G.">
        <sqlFile path="../../sql/eledger/013_config_el_transaction_couples_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create accounting, taxpayer_calc schema" author="V.G.">
        <sqlFile path="../../sql/eledger/014_config_accounting_taxpayer_calc_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create config interest_calculation_schema schema" author="V.G.">
        <sqlFile path="../../sql/eledger/015_config_interest_calculation_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create calculated_interest_info schema" author="V.G.">
        <sqlFile path="../../sql/eledger/016_calculated_interest_info_schema.sql" relativeToChangelogFile="true"/>
    </changeSet>

    <changeSet id="Create functions parse configuration lines" author="V.G.">
        <sqlFile path="../../sql/eledger/017_functions_parse_configuration_lines_to_sql.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create trigger config interest_calculation" author="V.G.">
        <sqlFile path="../../sql/eledger/018_trigger_interest_calculation.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure to calculate interest based on config" author="V.G.">
        <sqlFile path="../../sql/eledger/019_procedure_sp_transaction_interest_info.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure sp_formulation_transaction" author="V.G.">
        <sqlFile path="../../sql/eledger/020_procedure_sp_formulation_transaction.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure sp_move_interet_to_accounting" author="V.G.">
        <sqlFile path="../../sql/eledger/021_procedure_sp_move_interet_to_accounting.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure sp_update_taxpayer_calculation_date" author="V.G.">
        <sqlFile path="../../sql/eledger/022_procedure_sp_update_taxpayer_calculation_date.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure sp_process_pac_for_date" author="V.G.">
        <sqlFile path="../../sql/eledger/023_procedure_sp_process_pac_for_date.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create functions which will give trial balance calculated result and total count" author="V.G.">
        <sqlFile path="../../sql/eledger/024_functions_fn_reporting_taxpayer_account.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure sp_repayment for payment type" author="V.G.">
        <sqlFile path="../../sql/eledger/025_procedure_sp_repayment.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create function get payable data" author="V.G.">
        <sqlFile path="../../sql/eledger/026_function_fn_get_payment_advice_data.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure repayment from net negative" author="V.G.">
        <sqlFile path="../../sql/eledger/027_procedure_sp_repayment_from_net_negative.sql" relativeToChangelogFile="true" splitStatements="false"/>
    </changeSet>

    <changeSet id="Create functions for SSP report" author="V.G.">
        <sqlFile path="../../sql/eledger/028_function_fn_taxpayer_account_ssp_report.sql" relativeToChangelogFile="true"
                 splitStatements="false"/>
    </changeSet>

    <changeSet id="Create function for refund" author="V.G.">
        <sqlFile path="../../sql/eledger/029_function_refundable_datas.sql" relativeToChangelogFile="true"
                 splitStatements="false"/>
    </changeSet>

    <changeSet id="Create procedure for refund transaction" author="V.G.">
        <sqlFile path="../../sql/eledger/030_procedure_sp_refund_from_net_negative.sql" relativeToChangelogFile="true"
                 splitStatements="false"/>
    </changeSet>

</databaseChangeLog>
